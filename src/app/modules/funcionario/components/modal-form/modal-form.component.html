<form [formGroup]="formFuncionario">

    <div class="grid">
        <div class="col-12">
            <p-dialog [(visible)]="openModal" [style]="{width: '50vw'}" header={{tittleForm}} [modal]="true" class="p-fluid">
                <ng-template pTemplate="content">
                    
                    <p class="text-center mb-6"><p-badge [value]="'Los campos marcados con * son obligatorios'"></p-badge></p>
               
                    <div class="form-group field mt-6">
                        <span class="p-float-label">
                            <p-dropdown [options]="personas()" 
                                formControlName="idPersona" 
                                placeholder="Seleccione una Persona" 
                                optionLabel="nombre" 
                                [(ngModel)]="funcionario.idPersona"
                                [filter]="true" 
                                filterBy="nombre"
                                filterPlaceholder="Buscar personas"
                                emptyFilterMessage="No existen coincidencias"
                                [showClear]="true"
                                appendTo="body">
                                <ng-template pTemplate="selectedItem">
                                    <div class="flex align-items-center gap-2" *ngIf="funcionario.idPersona">
                                        <div>{{ funcionario.idPersona.nombre }} {{ funcionario.idPersona.apellidoPat }} {{ funcionario.idPersona.apellidoMat }}</div>
                                    </div>
                                </ng-template>
                                <ng-template let-persona pTemplate="item">
                                    <div class="flex align-items-center gap-2">
                                        <div>{{ persona.nombre }} {{ persona.apellidoPat }} {{ persona.apellidoMat }}</div>
                                    </div>
                                </ng-template>
                            </p-dropdown>
                            <label for="float-label" class="text-lg font-bold text-800"><i class="text-red-500">*</i> Persona</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formFuncionario.controls['idPersona'].touched && formFuncionario.get('idPersona')?.hasError('required')" >El campo Persona es obligatorio</small>
                    </div>
                    
                    <div class="form-group field mt-6">
                        <span class="p-float-label">
                            <p-dropdown [options]="cargos()" 
                                formControlName="idCargo" 
                                placeholder="Seleccione un Cargo" 
                                optionLabel="descripcion" 
                                [(ngModel)]="funcionario.idCargo"
                                [filter]="true" 
                                filterBy="descripcion"
                                filterPlaceholder="Buscar cargo"
                                emptyFilterMessage="No existen coincidencias"
                                [showClear]="true"
                                appendTo="body"></p-dropdown>
                            <label for="float-label" class="text-lg font-bold text-800"><i class="text-red-500">*</i> Cargo</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formFuncionario.controls['idCargo'].touched && formFuncionario.get('idCargo')?.hasError('required')" >El campo Cargo es obligatorio</small>
                    </div>
                    
                    <div class="form-group field my-6">
                        <span class="p-float-label">
                            <p-dropdown [options]="unidades()" 
                                formControlName="idUnidad" 
                                placeholder="Seleccione una Unidad" 
                                optionLabel="descripcion" 
                                [(ngModel)]="funcionario.idUnidad"
                                [filter]="true" 
                                filterBy="descripcion"
                                filterPlaceholder="Buscar unidad"
                                emptyFilterMessage="No existen coincidencias"
                                [showClear]="true"
                                appendTo="body"></p-dropdown>
                            <label for="float-label" class="text-lg font-bold text-800"><i class="text-red-500">*</i> Unidad</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formFuncionario.controls['idUnidad'].touched && formFuncionario.get('idUnidad')?.hasError('required')" >El campo Unidad es obligatorio</small>
                    </div><br><br>
                    
                </ng-template>
                <ng-template pTemplate="footer">
                    <input type="hidden" pInputText id="id" [(ngModel)]="funcionario.id" formControlName="id"/>
                    <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-secondary p-button-rounded mr-2 p-button-sm sombra-black" (click)="hideModal()"></button>
                    <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-rounded mr-2 sombra-black p-button-sm" (click)="saveFuncionario()"
                        [loading]="isLoading"
                        [disabled]="formFuncionario.invalid">
                    </button>
                </ng-template>
            </p-dialog>
        </div>
    </div>
</form>