<form [formGroup]="formRegistroObjecion">

    <div class="grid">
        <div class="col-12">
            <p-dialog [(visible)]="openModal" [style]="{width: '50vw'}" header={{tittleForm}} [modal]="true" class="p-fluid">
                <ng-template pTemplate="content">
                    
                    <p class="text-center mb-6"><p-badge [value]="'Selecione Tipo de Objeción'"></p-badge></p>
                    <div class="form-group field my-6">
                        <span class="p-float-label">
                            <p-dropdown [options]="tipoobjeciones()" 
                                formControlName="idTipoObjecion" 
                                placeholder="Seleccione Tipo de Objeción" 
                                optionLabel="descripcion"
                                [(ngModel)]="registroobjecion.idTipoObjecion"
                                [filter]="true" 
                                filterBy="descripcion"
                                filterPlaceholder="Buscar tipo de objeción"
                                emptyFilterMessage="No existen coincidencias"
                                [showClear]="true"></p-dropdown>
                            <label for="float-label" class="text-lg font-bold text-800"><i class="text-red-500">*</i> Tipo de Objeción</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formRegistroObjecion.controls['idTipoObjecion'].touched && formRegistroObjecion.get('idTipoObjecion')?.hasError('required')" >El campo usuario es obligatorio</small>
                    </div>
                    <div class="form-group field my-6">
                        <span class="p-float-label">
                            <p-dropdown [options]="funcionarios()" 
                                formControlName="idFuncionario" 
                                placeholder="Seleccione funconario" 
                                optionLabel="idFuncionario" 
                                [(ngModel)]="registroobjecion.idFuncionario"
                                [filter]="true" 
                                filterBy="idFuncionario"
                                filterPlaceholder="Buscar Funcionario"
                                emptyFilterMessage="No existen coincidencias"
                                [showClear]="true"></p-dropdown>
                            <label for="float-label" class="text-lg font-bold text-800"><i class="text-red-500">*</i>Funcionario</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formRegistroObjecion.controls['idFuncionario'].touched && formRegistroObjecion.get('idFuncionario')?.hasError('required')" >El campo usuairo es obligatorio</small>
                    </div>
                    <div class="form-group field mt-6">
                        <span class="p-float-label">
                            <input type="text" pInputText id="numeroResolucion" [(ngModel)]="registroobjecion.numeroResolucion" formControlName="numeroResolucion" class="p-inputtext-sm capitalize mt-1" />
                            <label htmlFor="numeroResolucion" class="text-lg font-bold text-800"><span class="text-red-500">*</span> Número de Resolución</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formRegistroObjecion.controls['numeroResolucion'].touched && formRegistroObjecion.get('numeroResolucion')?.hasError('required')" >El campo Número de resolución es obligatorio</small>
                    </div>
                   
                    <div class="form-group field mt-6">
                        <span class="p-float-label">
                            <input type="text" pInputText id="cud" [(ngModel)]="registroobjecion.cud" formControlName="cud" class="p-inputtext-sm mt-1" />
                            <label htmlFor="cud" class="text-lg font-bold text-800"><span class="text-red-500">*</span> CUD</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formRegistroObjecion.controls['cud'].touched && formRegistroObjecion.get('cud')?.hasError('required')" >El campo CUD es obligatorio</small>
                    </div>


                    <div class="form-group field mt-6">
                        <span class="p-float-label">
                            <p-calendar id = "fechaAsignacion" formControlName="fechaAsignacion"></p-calendar>
                            <label htmlFor="fechaAsignacion" class="text-lg font-bold text-800"><span class="text-red-500">*</span> Fecha de Asignación</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formRegistroObjecion.controls['fechaAsignacion'].touched && formRegistroObjecion.get('fechaAsignacion')?.hasError('required')" >El campo Fecha Asignación es obligatorio</small>
                    </div>
                    <div class="form-group field mt-6">
                        <span class="p-float-label">
                            <p-calendar id = "fechaRecepcion" formControlName="fechaRecepcion"></p-calendar>
                            <label htmlFor="fechaRecepcion" class="text-lg font-bold text-800"><span class="text-red-500">*</span> Fecha de Recepción</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formRegistroObjecion.controls['fechaRecepcion'].touched && formRegistroObjecion.get('fechaRecepcion')?.hasError('required')" >El campo Fecha de Recepción es obligatorio</small>
                    </div>
                    <div class="form-group field mt-6">
                        <span class="p-float-label">
                            <p-calendar id = "fechaDevolucion" formControlName="fechaDevolucion"></p-calendar>
                            <label htmlFor="fechaDevolucion" class="text-lg font-bold text-800"><span class="text-red-500">*</span> Fecha de Devolución</label>
                        </span>
                        <small class="p-error block mt-2" *ngIf="formRegistroObjecion.controls['fechaDevolucion'].touched && formRegistroObjecion.get('fechaDevolucion')?.hasError('required')" >El campo Fecha de Devolución es obligatorio</small>
                    </div>


                </ng-template>
                <ng-template pTemplate="footer">
                    <input type="hidden" pInputText id="id" [(ngModel)]="registroobjecion.id" formControlName="id"/>
                    <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-secondary p-button-rounded mr-2 p-button-sm sombra-black" (click)="hideModal()"></button>
                    <button pButton pRipple label="Save" icon="pi pi-check" class="p-button-rounded mr-2 sombra-black p-button-sm" (click)="saveUnidad()"
                        [loading]="isLoading"
                        [disabled]="formRegistroObjecion.invalid">
                    </button>
                </ng-template>
            </p-dialog>
        </div>
    </div>
</form>

